# FIX Protocol Trade Executor (FIXNA)

## Overview/Description

FIXNA (FIX NATIVE Application) is a Python-based application designed to connect to a Financial Information eXchange (FIX) protocol API for trade execution. It manages FIX sessions, sends trade orders, processes execution reports, and handles order cancellations. The application is configurable through an INI file and provides comprehensive logging.

## Features

*   Connects to a FIX server using TCP/IP.
*   Handles core FIX session management messages:
    *   Logon (35=A)
    *   Logout (35=5)
    *   Heartbeat (35=0)
    *   TestRequest (35=1)
    *   ResendRequest (35=2) (basic handling)
    *   SequenceReset (35=4) (Reset and GapFill modes)
*   Sends `NewOrderSingle` (35=D) messages for Market and Limit orders.
*   Receives and processes `ExecutionReport` (35=8) messages to track order status.
*   Sends `OrderCancelRequest` (35=F) and handles `OrderCancelReject` (35=9) messages.
*   Highly configurable via an INI file (`config/config.ini`).
*   Comprehensive logging to both console and a specified log file.
*   Unit tests for core components (`AppSettings`, `FixClient`, `TradeExecutor`).

## Project Structure

The project is organized into the following main directories:

*   `src/`: Contains the core application logic.
    *   `main.py`: The main entry point for the application.
    *   `fix_client.py`: Manages FIX connectivity, session handling, and message transport.
    *   `trade_executor.py`: Handles order creation, sending, and processing of execution reports.
    *   `logger_setup.py`: Configures logging for the application.
    *   `utils.py`: (If present) Utility functions.
*   `config/`: Contains configuration files.
    *   `settings.py`: Loads and manages application settings from the INI file.
    *   `config.example.ini`: An example configuration file.
    *   `config.ini`: The actual configuration file used by the application (user-created from the example).
*   `tests/`: Contains unit tests for the application.
    *   `test_settings.py`: Tests for configuration loading.
    *   `test_fix_client.py`: Tests for FIX client logic.
    *   `test_trade_executor.py`: Tests for trade execution logic.
*   `logs/`: (This directory is typically created by the application) Contains log files generated by the application, as specified in `config.ini`.

## Prerequisites

*   Python 3.x (developed with Python 3.7+)
*   `simplefix` library: A Python library for creating and parsing FIX messages.

## Setup & Installation

1.  **Clone the Repository:**
    (If applicable, otherwise skip this step if you have the source code directly)
    ```bash
    git clone <repository_url>
    cd fixna-trading-app 
    ```

2.  **Install Dependencies:**
    The primary external dependency is `simplefix`.
    ```bash
    pip install simplefix
    ```
    If a `requirements.txt` file is provided in the future, you can use:
    ```bash
    pip install -r requirements.txt
    ```

3.  **Set Up Configuration:**
    The application requires a `config.ini` file to run.
    *   Navigate to the `config/` directory.
    *   Copy the example configuration file:
        ```bash
        cp config.example.ini config.ini
        ```
    *   Edit `config/config.ini` with your specific FIX server details and preferences. Key fields include:
        *   `[FIX_SERVER]`: `Host`, `Port`, `SenderCompID`, `TargetCompID`, `HeartbeatIntervalSeconds`.
        *   `[ACCOUNT]`: `Username`, `Password` (these might be optional depending on your FIX server's requirements).
        *   `[APPLICATION]`: `LogLevel`, `LogFile`.

## Running the Application

To start the FIXNA trading application:

```bash
python -m src.main
```
or from the project root:
```bash
python src/main.py
```

**Note:** Ensure that a FIX server is running, accessible from the machine where you run the application, and that your `config.ini` settings match the server's requirements.

## Running Tests

To discover and run all unit tests located in the `tests/` directory:

```bash
python -m unittest discover -s tests
```
You can also run individual test files:
```bash
python -m unittest tests.test_fix_client 
# or
python tests/test_fix_client.py
```

## Configuration Details (`config.ini`)

The `config.ini` file is structured into sections:

*   **`[FIX_SERVER]`**:
    *   `Host`: IP address or hostname of the FIX server.
    *   `Port`: Port number for the FIX server connection.
    *   `SenderCompID`: Your FIX SenderCompID.
    *   `TargetCompID`: The FIX server's TargetCompID.
    *   `HeartbeatIntervalSeconds`: The heartbeat interval (in seconds) to be proposed to the server during Logon. The server may override this.

*   **`[ACCOUNT]`**:
    *   `Username`: Username for FIX session authentication (if required by the server).
    *   `Password`: Password for FIX session authentication (if required by the server).
    *   *Note: These fields are optional and their necessity depends on the FIX server's security configuration.*

*   **`[APPLICATION]`**:
    *   `LogLevel`: The logging level for the application. Valid values include `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL`.
    *   `LogFile`: Path to the log file (e.g., `logs/app.log`). If relative, it's typically relative to the project root. The directory will be created if it doesn't exist.

## Logging

*   The application logs messages to both the console (stdout) and a log file.
*   The log file path and logging verbosity are configured in `config.ini` under the `[APPLICATION]` section (`LogFile` and `LogLevel` respectively).
*   **Log Levels:**
    *   `DEBUG`: Very detailed information, typically of interest only when diagnosing problems.
    *   `INFO`: Confirmation that things are working as expected.
    *   `WARNING`: An indication that something unexpected happened, or indicative of some problem in the near future (e.g., ‘disk space low’). The software is still working as expected.
    *   `ERROR`: Due to a more serious problem, the software has not been able to perform some function.
    *   `CRITICAL`: A serious error, indicating that the program itself may be unable to continue running.
*   The log format includes a timestamp, logger name, log level, module name, and the log message.

## Future Enhancements (Potential)

*   **SSL/TLS Encryption:** Secure the FIX connection using SSL/TLS.
*   **Automatic Reconnection:** Implement robust logic for automatically reconnecting if the FIX session drops.
*   **Persistent Sequence Numbers:** Store and retrieve FIX sequence numbers across application restarts to ensure session continuity.
*   **More Advanced Order Types:** Support for other order types beyond Market and Limit (e.g., Stop, StopLimit).
*   **Order Modification:** Implement `OrderCancelReplaceRequest` (35=G).
*   **Expanded FIX Message Support:** Handle a wider range of administrative and application-level FIX messages.
*   **GUI Interface:** A graphical user interface for easier interaction.
*   **Database Integration:** Store trades, configurations, or logs in a database.

---
*This README provides an overview of the FIXNA application. Refer to the source code and configuration files for more detailed information.*
